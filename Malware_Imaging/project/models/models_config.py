# Conda Imports
import pandas as pd

# User Defined Imports
from Malware_Imaging.config import DATA_DIRECTORIES, IMAGE_DIRECTORIES

# Getting Stratified Random Sampling CSV to Align Images to their Labels
labels_df = pd.read_csv(DATA_DIRECTORIES["LABELS"])

# From the Dataframe Matching the Hash To the File Name Get Ordered List of Labels
image_labels = [
    (labels_df.loc[labels_df["hash"] == name]["family"].iloc[0])
    for name in IMAGE_DIRECTORIES["TARGET_FILE_NAMES"]
]

# Tying Image Paths To Their Labels and Convert to Dataframes
images = IMAGE_DIRECTORIES["MALWARE_DEC_IMAGES_PATHS"]
images_with_labels = pd.DataFrame(
    data=[(image, image_label) for image, image_label in zip(images, image_labels)],
    columns=["image_path", "family"],
)


"""

Setting Our Image Sizing for Small Medium and Large

max pixel dim: 1024x32557 px
max pixel size: 33,338,368 px
median pixel dim: 1024x808 px
median pixel size: 827,392 px
min pixel dim: 64x49 px
min pixel size:: 3,136 px

compressed size to be floor(sqrt(3,136)) = 56x56 px
median size to be ceiling(sqrt(827,392)) = 910x910 px
expanded size to be ceiling(sqrt(33,338,368)) = 5,774x5,774 px

"""
DEFAULT_INPUT_SIZES = {
    "SMALL-GRAY": (56, 56, 1),
    "MEDIUM-GRAY": (910, 810, 1),
    "LARGE-GRAY": (5774, 5774, 1),
}
